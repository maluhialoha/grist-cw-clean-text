<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Grist Text Editor Widget</title>
<link rel="stylesheet" href="style.css" />
<script src="https://docs.getgrist.com/grist-plugin-api.js"></script>
</head>
<body>

<!-- Mode Configuration -->
<div id="configMode" class="config-mode" style="display: none;">
  <div class="config-header">
    <div class="config-actions">
      <button class="btn-secondary" onclick="cancelEdit()">Annuler</button>
      <button class="btn-primary" onclick="saveContent()">Enregistrer</button>
    </div>
  </div>

  <div class="toolbar">
    <div class="toolbar-group">
      <button class="toolbar-btn" onclick="execCmd('bold')" title="Gras (Ctrl+B)"><strong>B</strong></button>
      <button class="toolbar-btn" onclick="execCmd('italic')" title="Italique (Ctrl+I)"><em>I</em></button>
      <button class="toolbar-btn" onclick="execCmd('underline')" title="SoulignÃ© (Ctrl+U)"><u>U</u></button>
      <button class="toolbar-btn" onclick="showLinkModal()" title="Ajouter un lien">ðŸ”—</button>
      <button class="toolbar-btn" onclick="execCmd('insertUnorderedList')" title="Liste Ã  puces">â€¢</button>
      <button class="toolbar-btn" onclick="toggleEmojiPicker(event)" title="InsÃ©rer un emoji">ðŸ˜€</button>
    </div>

    <div class="toolbar-group">
      <select class="toolbar-btn" onchange="execCmd('formatBlock', this.value); this.selectedIndex=0;">
        <option value="">Style</option>
        <option value="h1">Titre 1</option>
        <option value="h2">Titre 2</option>
        <option value="h3">Titre 3</option>
        <option value="p">Paragraphe</option>
      </select>
      <select class="toolbar-btn" id="fontSelect" onchange="applyFont(this.value)">
        <option value="">Police</option>
        <option value="Inter, sans-serif">Inter</option>
        <option value="'Open Sans', sans-serif">Open Sans</option>
        <option value="Roboto, sans-serif">Roboto</option>
      </select>
    </div>

    <div class="toolbar-group">
      <button class="toolbar-btn" onclick="toggleColorDropdown()" title="Couleur du texte">A</button>
      <button class="toolbar-btn" onclick="toggleBgColorDropdown()" title="Couleur de fond">A</button>
    </div>
  </div>

  <div class="editor-container">
    <div id="editor" contenteditable="true" data-placeholder="Commencez Ã  Ã©crire..."></div>
  </div>

  <!-- Emoji Picker -->
  <div id="emojiPicker" class="emoji-picker"></div>
</div>

<!-- Mode Display -->
<div id="displayMode" class="display-mode">
  <div id="displayContent" class="display-content"></div>
</div>

<!-- Modals -->
<div id="linkModal" class="modal">
  <div class="modal-content">
    <h3>Ajouter un lien</h3>
    <input type="text" id="linkText" placeholder="Texte du lien">
    <input type="url" id="linkUrl" placeholder="https://exemple.com">
    <div class="modal-actions">
      <button class="btn-secondary" onclick="closeLinkModal()">Annuler</button>
      <button class="btn-primary" onclick="insertLink()">InsÃ©rer</button>
    </div>
  </div>
</div>

<script src="script.js"></script>
</body>
</html>
